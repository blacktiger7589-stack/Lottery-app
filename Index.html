<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡πÅ‡∏≠‡∏û‡∏Ñ‡∏µ‡∏¢‡πå‡∏´‡∏ß‡∏¢</title>
<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

<style>
body{margin:0;padding:12px;font-family:sans-serif;background:#f3f9f4}
.container{max-width:1200px;margin:auto;background:#fff;padding:14px;border-radius:16px}
input,select,button{width:100%;padding:12px;margin:6px 0;font-size:16px}
button{background:#2e7d32;color:#fff;border:none;border-radius:10px}
button.danger{background:#d9534f}
.grid{display:grid;grid-template-columns:1fr 1fr;gap:8px}
.flex{display:flex;gap:8px}
.number-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(70px,1fr));gap:6px}
.card{border:1px dashed #aaa;padding:10px;border-radius:12px;margin-top:14px}
table{border-collapse:collapse;width:100%}
th,td{border:1px solid #ccc;padding:6px;text-align:center}
.blessing{text-align:center;font-style:italic;color:#2e7d32;margin-top:8px}
</style>
</head>

<body>
<div class="container">
<h2>üì± ‡πÅ‡∏≠‡∏û‡∏Ñ‡∏µ‡∏¢‡πå‡∏´‡∏ß‡∏¢</h2>

<input id="buyer" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏ô‡∏ã‡∏∑‡πâ‡∏≠">

<div class="grid">
  <select id="digit"></select>
  <select id="type"></select>
</div>

<div class="number-grid" id="numbers"></div>

<div id="money1">
  <input id="amount1" type="number" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô">
</div>

<div id="money2" class="flex" style="display:none">
  <input id="amountA" type="number" placeholder="‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏µ‡πà 1">
  <input id="amountB" type="number" placeholder="‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏µ‡πà 2">
</div>

<button onclick="addItems()">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</button>

<h3>üìä ‡∏™‡∏£‡∏∏‡∏õ‡∏£‡∏≤‡∏¢‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•</h3>
<div id="personArea"></div>
</div>

<script>
document.addEventListener("DOMContentLoaded", ()=>{

const digit = document.getElementById("digit");
const type = document.getElementById("type");
const numbers = document.getElementById("numbers");
const money1 = document.getElementById("money1");
const money2 = document.getElementById("money2");
const buyer = document.getElementById("buyer");
const amount1 = document.getElementById("amount1");
const amountA = document.getElementById("amountA");
const amountB = document.getElementById("amountB");
const personArea = document.getElementById("personArea");

let data = JSON.parse(localStorage.getItem("lottery_data")) || {};

function save(){
  localStorage.setItem("lottery_data", JSON.stringify(data));
}

function init(){
  digit.innerHTML = `
    <option value="2">‡πÄ‡∏•‡∏Ç 2 ‡∏ï‡∏±‡∏ß</option>
    <option value="3">‡πÄ‡∏•‡∏Ç 3 ‡∏ï‡∏±‡∏ß</option>`;
  for(let i=0;i<10;i++) numbers.innerHTML+=`<input placeholder="‡πÄ‡∏•‡∏Ç">`;
  updateType();
  render();
}

digit.onchange = updateType;
type.onchange = updateMoney;

function updateType(){
  type.innerHTML="";
  if(digit.value==="2"){
    type.innerHTML += `
      <option>2 ‡∏ï‡∏±‡∏ß‡∏ö‡∏ô</option>
      <option>2 ‡∏ï‡∏±‡∏ß‡∏•‡πà‡∏≤‡∏á</option>
      <option>2 ‡∏ï‡∏±‡∏ß‡∏ö‡∏ô/‡∏•‡πà‡∏≤‡∏á</option>`;
  }else{
    type.innerHTML += `
      <option>3 ‡∏ï‡∏±‡∏ß‡∏ï‡∏£‡∏á</option>
      <option>3 ‡∏ï‡∏±‡∏ß‡πÇ‡∏ï‡πä‡∏î</option>
      <option>3 ‡∏ï‡∏±‡∏ß‡∏ï‡∏£‡∏á/‡πÇ‡∏ï‡πä‡∏î</option>`;
  }
  updateMoney();
}

function updateMoney(){
  if(type.value.includes("/")){
    money1.style.display="none";
    money2.style.display="flex";
  }else{
    money1.style.display="block";
    money2.style.display="none";
  }
}

window.addItems = function(){
  if(!buyer.value.trim()) return alert("‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏ô‡∏ã‡∏∑‡πâ‡∏≠");
  const nums=[...numbers.querySelectorAll("input")].map(i=>i.value).filter(Boolean);
  if(!nums.length) return alert("‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏•‡∏Ç");

  data[buyer.value] = data[buyer.value] || [];
  nums.forEach(n=>{
    data[buyer.value].push({
      num:n,
      type:type.value,
      money: type.value.includes("/") ? [amountA.value,amountB.value] : [amount1.value]
    });
  });
  save();
  render();
}

function render(){
  personArea.innerHTML="";
  for(let name in data){
    personArea.innerHTML += `
      <div class="card">
        <b>${name}</b>
        <ul>${data[name].map(i=>`<li>${i.num} (${i.type})</li>`).join("")}</ul>
        <div class="blessing">‚ú® ‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡πÇ‡∏ä‡∏Ñ‡∏î‡∏µ‡πÅ‡∏•‡∏∞‡∏ñ‡∏π‡∏Å‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏ó‡∏∏‡∏Å‡∏á‡∏ß‡∏î‡∏Ñ‡πà‡∏∞ ‚ú®</div>
      </div>`;
  }
}

init();
});
</script>
</body>
</html>

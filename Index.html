<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡πÅ‡∏≠‡∏û‡∏Ñ‡∏µ‡∏¢‡πå‡∏´‡∏ß‡∏¢</title>

<style>
body{
  margin:0;
  padding:12px;
  font-family:sans-serif;
  background:#f2f6f3;
}
.container{
  max-width:1100px;
  margin:auto;
  background:#fff;
  padding:16px;
  border-radius:16px;
  box-shadow:0 8px 25px rgba(0,0,0,.08);
}
h2,h3{
  text-align:center;
  margin:10px 0;
}
input,select,button{
  width:100%;
  padding:12px;
  font-size:16px;
  margin:6px 0;
  border-radius:10px;
  border:1px solid #ccc;
}
button{
  background:#2e7d32;
  color:#fff;
  border:none;
}
.grid{display:grid;grid-template-columns:1fr 1fr;gap:8px}
.flex{display:flex;gap:8px}
.number-grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(70px,1fr));
  gap:6px;
}
.card{
  border:1px dashed #bbb;
  padding:12px;
  margin-top:14px;
  border-radius:14px;
  background:#fafafa;
}
table{
  width:100%;
  border-collapse:collapse;
  font-size:14px;
}
th,td{
  border:1px solid #ccc;
  padding:6px;
  text-align:center;
}
.blessing{
  text-align:center;
  margin-top:8px;
  font-style:italic;
  color:#2e7d32;
}
.total{
  text-align:right;
  font-size:17px;
  margin-top:6px;
}
hr{margin:20px 0}
</style>
</head>

<body>
<div class="container">

<h2>üì± ‡πÅ‡∏≠‡∏û‡∏Ñ‡∏µ‡∏¢‡πå‡∏´‡∏ß‡∏¢</h2>

<!-- ===== INPUT ===== -->
<input id="buyer" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏ô‡∏ã‡∏∑‡πâ‡∏≠">

<div class="grid">
  <select id="digit">
    <option value="2">‡πÄ‡∏•‡∏Ç 2 ‡∏ï‡∏±‡∏ß</option>
    <option value="3">‡πÄ‡∏•‡∏Ç 3 ‡∏ï‡∏±‡∏ß</option>
  </select>

  <select id="type"></select>
</div>

<div class="number-grid" id="numbers"></div>

<div id="money1">
  <input id="amount1" type="number" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô">
</div>

<div id="money2" class="flex" style="display:none">
  <input id="amountA" type="number" placeholder="‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏µ‡πà 1">
  <input id="amountB" type="number" placeholder="‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏µ‡πà 2">
</div>

<button id="addBtn">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</button>

<hr>

<h3>üìä ‡∏™‡∏£‡∏∏‡∏õ‡∏£‡∏≤‡∏¢‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•</h3>
<div id="personArea"></div>

</div>

<script>
document.addEventListener("DOMContentLoaded",()=>{

/* ===== ELEMENT ===== */
const buyer = document.getElementById("buyer");
const digit = document.getElementById("digit");
const type = document.getElementById("type");
const numbers = document.getElementById("numbers");
const money1 = document.getElementById("money1");
const money2 = document.getElementById("money2");
const amount1 = document.getElementById("amount1");
const amountA = document.getElementById("amountA");
const amountB = document.getElementById("amountB");
const addBtn = document.getElementById("addBtn");
const personArea = document.getElementById("personArea");

/* ===== DATA ===== */
let data = JSON.parse(localStorage.getItem("lottery_data")) || {};

/* ===== INIT ===== */
for(let i=0;i<10;i++){
  numbers.innerHTML += `<input placeholder="‡πÄ‡∏•‡∏Ç">`;
}
updateType();
render();

/* ===== EVENTS ===== */
digit.addEventListener("change",updateType);
type.addEventListener("change",updateMoney);
addBtn.addEventListener("click",addItems);

/* ===== FUNCTIONS ===== */
function updateType(){
  type.innerHTML="";
  if(digit.value==="2"){
    type.innerHTML += `
      <option>2 ‡∏ï‡∏±‡∏ß‡∏ö‡∏ô</option>
      <option>2 ‡∏ï‡∏±‡∏ß‡∏•‡πà‡∏≤‡∏á</option>
      <option>2 ‡∏ï‡∏±‡∏ß‡∏ö‡∏ô/‡∏•‡πà‡∏≤‡∏á</option>`;
  }else{
    type.innerHTML += `
      <option>3 ‡∏ï‡∏±‡∏ß‡∏ï‡∏£‡∏á</option>
      <option>3 ‡∏ï‡∏±‡∏ß‡πÇ‡∏ï‡πä‡∏î</option>
      <option>3 ‡∏ï‡∏±‡∏ß‡∏ï‡∏£‡∏á/‡πÇ‡∏ï‡πä‡∏î</option>`;
  }
  updateMoney();
}

function updateMoney(){
  if(type.value.includes("/")){
    money1.style.display="none";
    money2.style.display="flex";
  }else{
    money1.style.display="block";
    money2.style.display="none";
  }
}

function addItems(){
  const name = buyer.value.trim();
  if(!name) return alert("‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏ô‡∏ã‡∏∑‡πâ‡∏≠");

  const nums = [...numbers.querySelectorAll("input")]
    .map(i=>i.value.trim())
    .filter(Boolean);

  if(nums.length===0) return alert("‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏•‡∏Ç‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏ä‡πà‡∏≠‡∏á");

  data[name] = data[name] || [];

  nums.forEach(n=>{
    data[name].push({
      num:n,
      type:type.value,
      money: type.value.includes("/")
        ? `${amountA.value}/${amountB.value}`
        : amount1.value
    });
  });

  localStorage.setItem("lottery_data",JSON.stringify(data));
  clearInputs();
  render();
}

function clearInputs(){
  [...numbers.querySelectorAll("input")].forEach(i=>i.value="");
  amount1.value="";
  amountA.value="";
  amountB.value="";
}

function render(){
  personArea.innerHTML="";
  for(const name in data){
    personArea.innerHTML += `
      <div class="card">
        <b>${name}</b>
        <table>
          <tr><th>‡πÄ‡∏•‡∏Ç</th><th>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</th><th>‡πÄ‡∏á‡∏¥‡∏ô</th></tr>
          ${data[name].map(i=>`
            <tr>
              <td>${i.num}</td>
              <td>${i.type}</td>
              <td>${i.money}</td>
            </tr>
          `).join("")}
        </table>
        <div class="blessing">
          ‚ú® ‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡πÇ‡∏ä‡∏Ñ‡∏î‡∏µ‡πÅ‡∏•‡∏∞‡∏ñ‡∏π‡∏Å‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏ó‡∏∏‡∏Å‡∏á‡∏ß‡∏î‡∏Ñ‡πà‡∏∞ ‚ú®
        </div>
      </div>`;
  }
}

});
</script>

</body>
</html>
